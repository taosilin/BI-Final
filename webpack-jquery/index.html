<!doctype html>
<html>
<head>
  <title>Maximum Width Edge Case Test</title>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="./dist/vis-network.min.js" type="text/javascript"></script>
  <script src="../../googleAnalytics.js"></script>
  <script type="text/javascript" src="dist/bundle.js" charset="utf-8"></script>
  <link href="./dist/vis-network.min.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" type="text/css" href="node_modules/devextreme/dist/css/dx.common.css" />
  <link rel="stylesheet" type="text/css" href="node_modules/devextreme/dist/css/dx.light.css" />
  <style type="text/css">
    #mynetwork {
      width: 600px;
      height: 400px;
      border: 1px solid lightgray;
    }
  </style>

</head>

<body>

<p>A word in a label that's wider than the maximum width will be forced onto a line. We can't do better without breaking the word into pieces, and even then the pieces could still be too wide.</p>

<p>Avoid the problem. Don't set ridiculously small maximum widths.</p>
<div id="search">
  <input id="Entity" type="text" name="Entity" value=""><button type="button" onclick="search1(document.getElementById('Entity').value)">Search</button>

  <input id="Entity1" name="Entity1" value="">
  <input id="Entity2" name="Entity2" value="">
  <button type="button" onclick="search2(document.getElementById('Entity1').value,document.getElementById('Entity2').value)">Search</button>
</div>
<div id="mynetwork"></div>
<div id="info">
  <p id="nodeid"></p>
</div>
<script type="text/javascript">
  var nodes = new vis.DataSet([
    { id: 1, label: 'Node 1', widthConstraint : { maximum : 30 } },
    { id: 2, label: 'Node 2', widthConstraint : { maximum : 30 } },
    { id: 4, label: 'Node 4'},
    { id: 5, label: 'Node 5'},
    { id: 6, label: 'Node 6', cid:1},
    { id: 7, label: 'Node 7', cid:1}
  ]);

  var edges = [
    {from:1,to:2,label:'relationship'},
    {from:2,to:7}
  ];

  var container = document.getElementById('mynetwork');
  var data = {
    nodes: nodes,
    edges: edges
  };
  var options = {
    edges: {
      font: {
        size: 12
      },
      widthConstraint: {
        maximum: 90
      }
    },
    nodes: {
      shape: 'box',
      margin: 10,
      font: {
        multi: true
      },
      widthConstraint: {
        maximum: 200
      }
    },
    physics: {
      enabled: false
    }
  };
  var network = new vis.Network(container, data, options);

  window.onload=function () {
    console.log("load");
    //初始化
    // axios.post()
  }

  function search1(Entity) {
    console.log(Entity);
    axios.get('http://localhost:5000/organization/'+String(Entity))
            .then(function(response){
              console.log(response);
            });
  }

  function search2(Entity1,Entity2) {
    console.log(Entity1);
    console.log(Entity2);
  }

  network.on("click", function(params) {
    console.log(params);
    console.log(params.edges);
    console.log(params.nodes[0]);
    document.getElementById("nodeid").innerText = params.nodes[0];
    //axios
  });

  network.on("doubleClick", function(params) {
    console.log(params);
    console.log("双击");
    //axios
  });
</script>

</body>
</html>
